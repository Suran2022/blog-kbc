# 博客项目技术架构

## 一、技术选型

### 1.1 前端技术栈

| 技术 | 版本 | 说明 |
| --- | --- | --- |
| Vue.js | 3.x | 前端框架 |
| Vue Router | 4.x | 路由管理 |
| Pinia | 2.x | 状态管理 |
| Element Plus | 2.x | UI组件库 |
| Axios | 1.x | HTTP客户端 |
| TinyMCE/WangEditor | 最新版 | 富文本编辑器 |
| Vite | 4.x | 构建工具 |
| ESLint | 8.x | 代码规范检查 |
| Prettier | 2.x | 代码格式化 |

### 1.2 后端技术栈

| 技术 | 版本 | 说明 |
| --- | --- | --- |
| Spring Boot | 2.7.x | 后端框架 |
| Spring Security | 5.7.x | 安全框架 |
| MyBatis-Plus | 3.5.x | ORM框架 |
| MySQL | 8.x | 关系型数据库 |
| Redis | 6.x | 缓存（可选） |
| JWT | - | 用户认证 |
| Lombok | - | 简化代码 |
| Swagger/Knife4j | - | API文档 |
| Hutool | - | 工具类库 |

## 二、系统架构

### 2.1 整体架构

本项目采用前后端分离的架构，前端和后端通过RESTful API进行通信。

```
+-------------------+        +-------------------+
|                   |        |                   |
|   前端应用         |  HTTP  |   后端应用         |
|   (Vue.js)        | <----> |   (Spring Boot)   |
|                   |  API   |                   |
+-------------------+        +-------------------+
                                      |
                                      |
                             +--------v--------+
                             |                 |
                             |    数据库        |
                             |    (MySQL)      |
                             |                 |
                             +-----------------+
```

### 2.2 前端架构

前端采用Vue.js 3框架，基于组件化开发模式，使用Vite作为构建工具，Element Plus作为UI组件库。

```
+-------------------------------------------------------+
|                      Vue.js 应用                       |
|                                                       |
| +-------------+  +-------------+  +----------------+  |
| |             |  |             |  |                |  |
| |   路由管理    |  |   状态管理   |  |   UI组件库      |  |
| | (Vue Router) |  |   (Pinia)   |  | (Element Plus) |  |
| |             |  |             |  |                |  |
| +-------------+  +-------------+  +----------------+  |
|                                                       |
| +-------------+  +-------------+  +----------------+  |
| |             |  |             |  |                |  |
| |  HTTP客户端  |  |  富文本编辑器 |  |   工具函数      |  |
| |   (Axios)   |  |  (TinyMCE)  |  |   (Utils)      |  |
| |             |  |             |  |                |  |
| +-------------+  +-------------+  +----------------+  |
|                                                       |
+-------------------------------------------------------+
```

### 2.3 后端架构

后端采用Spring Boot框架，使用分层架构设计，包括控制器层、服务层、数据访问层。

```
+-------------------------------------------------------+
|                    Spring Boot 应用                    |
|                                                       |
| +-------------+  +-------------+  +----------------+  |
| |             |  |             |  |                |  |
| |   控制器层   |  |    服务层   |  |   数据访问层    |  |
| | (Controller) |  |  (Service)  |  |    (Mapper)    |  |
| |             |  |             |  |                |  |
| +-------------+  +-------------+  +----------------+  |
|                                                       |
| +-------------+  +-------------+  +----------------+  |
| |             |  |             |  |                |  |
| |   安全框架   |  |   ORM框架   |  |    工具类      |  |
| |  (Security)  |  |(MyBatis-Plus)|  |    (Utils)     |  |
| |             |  |             |  |                |  |
| +-------------+  +-------------+  +----------------+  |
|                                                       |
+-------------------------------------------------------+
```

## 三、数据库设计

### 3.1 ER图

```
+-------------+       +-------------+       +-------------+
|    User     |       |   Article   |       |  Category   |
+-------------+       +-------------+       +-------------+
| id          |       | id          |       | id          |
| username    |       | title       |       | name        |
| password    |       | content     |       | description |
| nickname    |       | summary     |<------| create_time |
| avatar      |       | category_id |       | update_time |
| email       |<------| view_count  |       +-------------+
| role        |       | create_time |              ^
| create_time |       | update_time |              |
| update_time |       | status      |              |
+-------------+       | cover_image |              |
                      +-------------+              |
                                                  |
+-------------+                        +-------------+
|   Setting   |                        | Contributor |
+-------------+                        +-------------+
| id          |                        | id          |
| site_name   |                        | name        |
| logo_url    |                        | description |
| description |                        | link        |
| keywords    |                        | create_time |
| footer_info |                        +-------------+
+-------------+
```

### 3.2 表结构

#### 3.2.1 用户表(User)

| 字段名 | 类型 | 约束 | 说明 |
| --- | --- | --- | --- |
| id | bigint | 主键，自增 | 用户ID |
| username | varchar(50) | 非空，唯一 | 用户名 |
| password | varchar(100) | 非空 | 密码（加密存储） |
| nickname | varchar(50) | 非空 | 昵称 |
| avatar | varchar(255) | | 头像URL |
| email | varchar(100) | | 邮箱 |
| role | varchar(20) | 非空，默认'admin' | 角色 |
| create_time | datetime | 非空 | 创建时间 |
| update_time | datetime | 非空 | 更新时间 |

#### 3.2.2 文章表(Article)

| 字段名 | 类型 | 约束 | 说明 |
| --- | --- | --- | --- |
| id | bigint | 主键，自增 | 文章ID |
| title | varchar(100) | 非空 | 文章标题 |
| content | longtext | 非空 | 文章内容 |
| summary | varchar(255) | | 文章摘要 |
| category_id | bigint | 外键 | 分类ID |
| view_count | int | 默认0 | 浏览次数 |
| create_time | datetime | 非空 | 创建时间 |
| update_time | datetime | 非空 | 更新时间 |
| status | tinyint | 非空，默认1 | 状态（0草稿，1已发布） |
| cover_image | varchar(255) | | 封面图片URL |

#### 3.2.3 分类表(Category)

| 字段名 | 类型 | 约束 | 说明 |
| --- | --- | --- | --- |
| id | bigint | 主键，自增 | 分类ID |
| name | varchar(50) | 非空 | 分类名称 |
| description | varchar(255) | | 分类描述 |
| create_time | datetime | 非空 | 创建时间 |
| update_time | datetime | 非空 | 更新时间 |

#### 3.2.4 系统设置表(Setting)

| 字段名 | 类型 | 约束 | 说明 |
| --- | --- | --- | --- |
| id | bigint | 主键，自增 | 设置ID |
| site_name | varchar(50) | 非空 | 站点名称 |
| logo_url | varchar(255) | | Logo图片URL |
| description | varchar(255) | | 站点描述 |
| keywords | varchar(255) | | 站点关键词 |
| footer_info | varchar(255) | | 页脚信息 |

#### 3.2.5 贡献者表(Contributor)

| 字段名 | 类型 | 约束 | 说明 |
| --- | --- | --- | --- |
| id | bigint | 主键，自增 | 贡献者ID |
| name | varchar(50) | 非空 | 贡献者名称 |
| description | varchar(255) | | 贡献描述 |
| link | varchar(255) | | 相关链接 |
| create_time | datetime | 非空 | 创建时间 |

## 四、API设计

### 4.1 RESTful API规范

本项目API设计遵循RESTful风格，主要包括以下规范：

- 使用HTTP动词表示操作类型：GET（查询）、POST（创建）、PUT（更新）、DELETE（删除）
- 使用URL表示资源，例如：`/api/articles`表示文章资源
- 使用HTTP状态码表示请求结果
- 使用JSON格式进行数据交换

### 4.2 统一响应格式

```json
{
  "code": 200,        // 状态码，200表示成功，非200表示失败
  "message": "操作成功", // 提示信息
  "data": {}          // 响应数据，可以是对象、数组或null
}
```

### 4.3 API接口列表

#### 4.3.1 前台API

**1. 文章相关**

| 接口 | 方法 | 说明 | 参数 |
| --- | --- | --- | --- |
| `/api/articles` | GET | 获取文章列表 | page, size, sort |
| `/api/articles/{id}` | GET | 获取文章详情 | id |
| `/api/articles/search` | GET | 搜索文章 | keyword, page, size |
| `/api/articles/category/{categoryId}` | GET | 获取特定分类下的文章 | categoryId, page, size |
| `/api/articles/latest` | GET | 获取最新文章 | size |

**2. 分类相关**

| 接口 | 方法 | 说明 | 参数 |
| --- | --- | --- | --- |
| `/api/categories` | GET | 获取所有分类 | - |

**3. 贡献者相关**

| 接口 | 方法 | 说明 | 参数 |
| --- | --- | --- | --- |
| `/api/contributors` | GET | 获取贡献者列表 | - |

**4. 系统设置相关**

| 接口 | 方法 | 说明 | 参数 |
| --- | --- | --- | --- |
| `/api/settings` | GET | 获取系统设置 | - |

#### 4.3.2 后台API

**1. 认证相关**

| 接口 | 方法 | 说明 | 参数 |
| --- | --- | --- | --- |
| `/api/admin/login` | POST | 管理员登录 | username, password |
| `/api/admin/logout` | POST | 退出登录 | - |

**2. 文章管理**

| 接口 | 方法 | 说明 | 参数 |
| --- | --- | --- | --- |
| `/api/admin/articles` | POST | 创建文章 | title, content, summary, categoryId, coverImage, status |
| `/api/admin/articles/{id}` | PUT | 更新文章 | id, title, content, summary, categoryId, coverImage, status |
| `/api/admin/articles/{id}` | DELETE | 删除文章 | id |
| `/api/admin/articles` | GET | 获取文章列表 | page, size, keyword, categoryId, status |
| `/api/admin/articles/{id}` | GET | 获取文章详情 | id |

**3. 分类管理**

| 接口 | 方法 | 说明 | 参数 |
| --- | --- | --- | --- |
| `/api/admin/categories` | POST | 创建分类 | name, description |
| `/api/admin/categories/{id}` | PUT | 更新分类 | id, name, description |
| `/api/admin/categories/{id}` | DELETE | 删除分类 | id |
| `/api/admin/categories` | GET | 获取分类列表 | - |
| `/api/admin/categories/{id}` | GET | 获取分类详情 | id |

**4. 系统设置**

| 接口 | 方法 | 说明 | 参数 |
| --- | --- | --- | --- |
| `/api/admin/settings` | PUT | 更新系统设置 | siteName, logoUrl, description, keywords, footerInfo |
| `/api/admin/upload` | POST | 上传文件 | file |

## 五、安全设计

### 5.1 用户认证

- 采用JWT（JSON Web Token）进行用户认证
- 登录成功后生成token，后续请求携带token进行身份验证
- token设置合理的过期时间，提高安全性

### 5.2 权限控制

- 基于Spring Security实现权限控制
- 区分前台访问和后台管理权限
- 对敏感操作进行权限校验

### 5.3 数据安全

- 用户密码采用BCrypt加密存储
- 敏感数据传输采用HTTPS协议
- 防止SQL注入、XSS攻击等常见安全问题

## 六、性能优化

### 6.1 前端优化

- 路由懒加载，减少首屏加载时间
- 静态资源压缩和CDN加速
- 组件按需加载
- 合理使用缓存策略

### 6.2 后端优化

- 数据库索引优化
- 使用Redis缓存热点数据
- 分页查询优化
- 接口响应时间监控

### 6.3 数据库优化

- 合理设计表结构和索引
- SQL语句优化
- 定期维护和优化数据库

## 七、部署方案

### 7.1 开发环境

- 前端：本地开发服务器（Vite）
- 后端：本地Spring Boot应用
- 数据库：本地MySQL实例

### 7.2 生产环境

- 前端：Nginx部署静态资源
- 后端：Docker容器化部署Spring Boot应用
- 数据库：独立MySQL服务器
- 文件存储：本地存储或云存储（如阿里云OSS）

### 7.3 CI/CD（可选）

- 使用Git进行版本控制
- 使用Jenkins或GitHub Actions实现持续集成和部署
- 自动化测试和构建